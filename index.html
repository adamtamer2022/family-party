 <!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>خريطة مقاعد - عرض</title>
<style>
  body { 
    margin: 0;
    background: #111; 
    color: white; 
    font-family: sans-serif; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    height: 100vh; 
  }
  h2 { margin-top: 20px; }

  #hall {
    flex-grow: 1; 
    display: flex; 
    flex-direction: column; 
    justify-content: center;
    align-items: center;
  }

  .screen {
    width: 400px; height: 60px;
    background: #222; border: 3px solid #444;
    border-radius: 10px; display: flex;
    align-items: center; justify-content: center;
    font-size: 18px; font-weight: bold; color: #ccc;
    margin-bottom: 60px; box-shadow: 0 0 20px rgba(255,255,255,0.1);
  }

  .seat {
    width: 50px; height: 50px; margin: 5px;
    display: inline-flex; background: green;
    border-radius: 5px; transition: 0.3s;
    align-items: center; justify-content: center;
    font-size: 12px; font-weight: bold; color: white;
  }
  .seat.booked { background: red; }
  .seat.special { background: gold; color: black; }
  .seat.special.booked { background: #b8860b; color: white; }

  .legend {
    display: flex; gap: 20px; margin-bottom: 20px; font-size: 14px;
  }
  .legend-item { display: flex; align-items: center; gap: 8px; }
  .legend-color { width: 20px; height: 20px; border-radius: 3px; }
  .legend-green { background: green; }
  .legend-red { background: red; }
  .legend-gold { background: gold; }

  .seat-container {
    display: grid;
    grid-template-columns: 60px 60px 60px;
    grid-template-rows: 60px 60px 60px;
    gap: 10px;
    justify-content: center;
    align-items: center;
  }

  /* العمود الأول */
  .seat-A1 { grid-column: 1; grid-row: 2; }
  .seat-A2 { grid-column: 1; grid-row: 3; }

  /* الصف الأوسط */
  .seat-A5 { grid-column: 2; grid-row: 2; }
  .seat-A6 { grid-column: 3; grid-row: 2; }

  /* الصف السفلي */
  .seat-A3 { grid-column: 2; grid-row: 3; }
  .seat-A4 { grid-column: 3; grid-row: 3; }

  /* الصف العلوي */
  .seat-A7 { grid-column: 2; grid-row: 1; }
  .seat-A8 { grid-column: 3; grid-row: 1; }
</style>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>

<h2>🎬 خريطة مقاعد الحفلة</h2>

<div class="legend">
  <div class="legend-item"><div class="legend-color legend-green"></div><span>متاح</span></div>
  <div class="legend-item"><div class="legend-color legend-red"></div><span>محجوز</span></div>
  <div class="legend-item"><div class="legend-color legend-gold"></div><span>مقعد خاص</span></div>
</div>

<div id="hall">
  <div class="screen">🎬 الشاشة 🎬</div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAVzRmVlUcyXsg25KM26_wJs-QMuF52k2o",
    authDomain: "frist-3a4ee.firebaseapp.com",
    databaseURL: "https://frist-3a4ee-default-rtdb.firebaseio.com",
    projectId: "frist-3a4ee",
    storageBucket: "frist-3a4ee.appspot.com",
    messagingSenderId: "1098758189245",
    appId: "1:1098758189245:web:dddd9e453767b7629387d4",
    measurementId: "G-K9JNSJPXXN"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const hall = document.getElementById("hall");
  const seatsContainer = document.createElement("div");
  seatsContainer.className = "seat-container";

  const seatIds = ["A1","A2","A3","A4","A5","A6","A7","A8"];
  const seats = [];

  seatIds.forEach(id => {
    const seat = document.createElement("div");
    seat.className = "seat seat-" + id;
    seat.setAttribute("id", id);
    seat.textContent = id;
    seats.push(seat);
    seatsContainer.appendChild(seat);
  });

  hall.appendChild(seatsContainer);

  seats.forEach((seat, index) => {
    const seatId = seatIds[index];
    const seatRef = ref(db, "seats/" + seatId);
    onValue(seatRef, snapshot => {
      if (snapshot.val() === "booked") seat.classList.add("booked");
      else seat.classList.remove("booked");
    });
  });
</script>
</body>
</html>
