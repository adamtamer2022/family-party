<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯</title>
<style>
  body { 
    margin: 0;
    background: #111; 
    color: white; 
    font-family: sans-serif; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    height: 100vh; 
  }

  h2 {
    margin-top: 20px;
  }

  #hall {
    flex-grow: 1; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; /* ÙŠØ®Ù„ÙŠ Ø§Ù„ÙƒØ±Ø§Ø³ÙŠ ÙÙŠ Ù†ØµÙ Ø§Ù„Ø´Ø§Ø´Ø© Ø¹Ù…ÙˆØ¯ÙŠ */
    align-items: center; /* ÙŠØ®Ù„ÙŠÙ‡Ø§ ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ Ø£ÙÙ‚ÙŠ */
  }

  .screen {
    width: 400px;
    height: 60px;
    background: #222;
    border: 3px solid #444;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: bold;
    color: #ccc;
    margin-bottom: 60px; /* 10 Ø³Ù… ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ */
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
  }

  .row { 
    margin: 10px; 
  }

  .seat {
    width: 50px; 
    height: 50px; 
    margin: 5px;
    display: inline-flex; 
    background: green;
    border-radius: 5px;
    transition: 0.3s;
    cursor: pointer;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    color: white;
  }

  .seat:hover {
    opacity: 0.8;
    transform: scale(1.05);
  }

  .seat.booked { 
    background: red; 
  }

  .seat.special { 
    background: gold; 
    color: black;
  }

  .seat.special.booked { 
    background: #b8860b; 
    color: white;
  }

  .legend {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    font-size: 14px;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .legend-color {
    width: 20px;
    height: 20px;
    border-radius: 3px;
  }

  .legend-green { background: green; }
  .legend-red { background: red; }
  .legend-gold { background: gold; }

  .instructions {
    margin-top: 20px;
    padding: 10px;
    background: #222;
    border-radius: 8px;
    text-align: center;
    font-size: 14px;
  }
</style>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
<h2>ğŸ“± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>

<div class="legend">
  <div class="legend-item">
    <div class="legend-color legend-green"></div>
    <span>Ù…ØªØ§Ø­</span>
  </div>
  <div class="legend-item">
    <div class="legend-color legend-red"></div>
    <span>Ù…Ø­Ø¬ÙˆØ²</span>
  </div>
  <div class="legend-item">
    <div class="legend-color legend-gold"></div>
    <span>Ù…Ù‚Ø¹Ø¯ Ø®Ø§Øµ</span>
  </div>
</div>

<div id="hall">
  <div class="screen">ğŸ¬ Ø§Ù„Ø´Ø§Ø´Ø© ğŸ¬</div>
</div>

<div class="instructions">
  Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ù‚Ø¹Ø¯ Ù„ØªØºÙŠÙŠØ± Ø­Ø§Ù„ØªÙ‡ (Ù…ØªØ§Ø­ âŸµ Ù…Ø­Ø¬ÙˆØ²)
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAVzRmVlUcyXsg25KM26_wJs-QMuF52k2o",
    authDomain: "frist-3a4ee.firebaseapp.com",
    databaseURL: "https://frist-3a4ee-default-rtdb.firebaseio.com",
    projectId: "frist-3a4ee",
    storageBucket: "frist-3a4ee.appspot.com",
    messagingSenderId: "1098758189245",
    appId: "1:1098758189245:web:dddd9e453767b7629387d4",
    measurementId: "G-K9JNSJPXXN"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const hall = document.getElementById("hall");

  // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ø®Ø§ØµØ©
  const specialSeats = ["B1", "B2", "B3", "B4", "B5", "B6"];

  // Ø±Ø³Ù… Ø§Ù„ÙƒØ±Ø§Ø³ÙŠ
  // Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„: A1 Ø¥Ù„Ù‰ A7
  const firstRowDiv = document.createElement("div");
  firstRowDiv.className = "row";
  for (let i=1; i<=7; i++) {
    const seat = document.createElement("div");
    seat.className = "seat";
    const seatId = "A" + i;
    seat.setAttribute("data-id", seatId);
    seat.textContent = seatId;
    firstRowDiv.appendChild(seat);

    const seatRef = ref(db, "seats/" + seatId);
    onValue(seatRef, snapshot => {
      if (snapshot.val() === "booked") {
        seat.classList.add("booked");
      } else {
        seat.classList.remove("booked");
      }
    });

    seat.addEventListener("click", () => {
      const booked = seat.classList.contains("booked");
      set(seatRef, booked ? "free" : "booked");
    });
  }
  hall.appendChild(firstRowDiv);

  // Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ø®Ø§ØµØ© S1-S6 + A8
  const secondRowDiv = document.createElement("div");
  secondRowDiv.className = "row";
  
  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ø®Ø§ØµØ© S1-S6 Ø£ÙˆÙ„Ø§Ù‹
  for (let i=1; i<=0; i++) {
    const seat = document.createElement("div");
    seat.className = "seat special";
    const seatId = "B" + i;
    seat.setAttribute("data-id", seatId);
    seat.textContent = "S" + i;
    secondRowDiv.appendChild(seat);

    const seatRef = ref(db, "seats/" + seatId);
    onValue(seatRef, snapshot => {
      if (snapshot.val() === "booked") {
        seat.classList.add("booked");
      } else {
        seat.classList.remove("booked");
      }
    });

    seat.addEventListener("click", () => {
      const booked = seat.classList.contains("booked");
      set(seatRef, booked ? "free" : "booked");
    });
  }

  // Ø¥Ø¶Ø§ÙØ© A8 ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
  const seatA8 = document.createElement("div");
  seatA8.className = "seat";
  seatA8.setAttribute("data-id", "A8");
  seatA8.textContent = "A8";
  secondRowDiv.appendChild(seatA8);

  const seatA8Ref = ref(db, "seats/A8");
  onValue(seatA8Ref, snapshot => {
    if (snapshot.val() === "booked") {
      seatA8.classList.add("booked");
    } else {
      seatA8.classList.remove("booked");
    }
  });

  seatA8.addEventListener("click", () => {
    const booked = seatA8.classList.contains("booked");
    set(seatA8Ref, booked ? "free" : "booked");
  });

  hall.appendChild(secondRowDiv);
</script>
</body>
</html>

